!function(){"use strict";var e={38:function(e,t,n){var r,a=(r=n(121))&&r.__esModule?r:{default:r};window.document.addEventListener("DOMContentLoaded",(()=>{(0,a.default)()}))},121:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(207)),a=o(n(541));function o(e){return e&&e.__esModule?e:{default:e}}t.default=()=>{r.default.component.registerMany({ShareDraftContent:a.default})}},541:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(594)),a=u(n(935)),o=u(n(923)),l=u(n(815)),i=u(n(950)),s=n(207);function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}class f extends r.Component{constructor(e){super(e),this.state={error:null,isLoaded:!1,previewUrl:l.default._t("ShareDraftContent.LOADING","Loading...")},this.handleToggle=this.handleToggle.bind(this)}handleInputChange(){}handleToggle(){const{isLoaded:e}=this.state;e?this.selectLink():this.generateShareDraftLink()}generateShareDraftLink(){const{links:{generateLink:e}}=this.props;return(0,i.default)(e,{credentials:"same-origin"}).then((e=>e.text())).then((e=>{this.setState({isLoaded:!0,previewUrl:e}),this.selectLink()}),(()=>{this.setState({error:!0})}))}selectLink(){this.linkRef&&this.linkRef.select()}renderError(){const{error:e}=this.state;return e?r.default.createElement("div",{className:"alert alert-danger"},l.default._t("ShareDraftContent.FETCH_ERROR","There was a problem generating the shareable link!")):null}renderHelp(){const{links:{learnMore:e}}=this.props;return r.default.createElement("p",null,l.default._t("ShareDraftContent.DESCRIPTION","Anyone with this link can view the draft version of this page.")," ",e&&r.default.createElement("a",{href:e,className:"share-draft-content__learn-more",target:"_blank",rel:"noopener noreferrer"},l.default._t("ShareDraftContent.LEARN_MORE","Learn more")))}renderLink(){const{previewUrl:e}=this.state;return r.default.createElement("div",{className:"share-draft-content__link-container"},r.default.createElement("input",{type:"text",className:"share-draft-content__link form-control no-change-track",title:l.default._t("ShareDraftContent.LINK_HELP","Link to share draft content"),value:e,onChange:this.handleInputChange,ref:e=>{this.linkRef=e},readOnly:!0}))}render(){const{id:e,PopoverField:t,className:n,button:a,popover:l}=this.props,i={id:e,buttonClassName:a.className,title:a.title,data:{popoverTitle:l.title,buttonTooltip:a.tooltip,placement:"top"},toggleCallback:this.handleToggle},s=(0,o.default)("share-draft-content__container",n);return r.default.createElement("div",{className:s},r.default.createElement(t,i,this.renderError(),this.renderHelp(),this.renderLink()))}}t.Component=f,f.propTypes={id:a.default.string.isRequired,className:a.default.string,button:a.default.shape({className:a.default.string,title:a.default.string,tooltip:a.default.string}),popover:a.default.shape({title:a.default.string}),links:a.default.shape({generateLink:a.default.string.isRequired,learnMore:a.default.string}),PopoverField:a.default.oneOfType([a.default.node,a.default.func]).isRequired},f.defaultProps={id:"share-draft-content",button:{className:"font-icon-share",title:l.default._t("ShareDraftContent.SHARE","Share"),tooltip:l.default._t("ShareDraftContent.SHARE_DRAFT_CONTENT","Share draft content")},popover:{title:l.default._t("ShareDraftContent.SHARE_DRAFT_CONTENT","Share draft content")},links:{learnMore:""},popoverIcon:"font-icon-share"};t.default=(0,s.inject)(["PopoverField"])(f)},508:function(e,t,n){var r=i(n(669)),a=i(n(594)),o=n(145),l=n(207);function i(e){return e&&e.__esModule?e:{default:e}}r.default.entwine("ss",(e=>{e(".js-injector-boot .share-draft-content__placeholder").entwine({ReactRoot:null,onmatch(){const e=this.closest(".cms-content").attr("id"),t=e?{context:e}:{},n=(0,l.loadComponent)("ShareDraftContent",t),r=this.closest(".cms-preview").length>0?"preview":"edit";let i=this.getReactRoot();i||(i=(0,o.createRoot)(this[0]),this.setReactRoot(i)),i.render(a.default.createElement(n,{id:`share-draft-content-${r}`,links:{generateLink:this.data("url"),learnMore:this.data("helpurl")}}))},onunmatch(){const e=this.getReactRoot();e&&(e.unmount(),this.setReactRoot(null))}})}))},207:function(e){e.exports=Injector},950:function(e){e.exports=IsomorphicFetch},935:function(e){e.exports=PropTypes},594:function(e){e.exports=React},145:function(e){e.exports=ReactDomClient},923:function(e){e.exports=classnames},815:function(e){e.exports=i18n},669:function(e){e.exports=jQuery}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n(508),n(38)}();